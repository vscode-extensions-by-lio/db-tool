<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="{{styleUri}}" rel="stylesheet" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'self' https://file%2B.vscode-resource.vscode-cdn.net; script-src 'self' 'nonce-{{nonce}}';">
</head>
<body>
  <h2>Create Connection</h2>

  <label>Host:</label><br/>
  <input id="host" value="localhost"/><br/><br/>

  <label>Port:</label><br/>
  <input id="port" value="5432"/><br/><br/>

  <label>User:</label><br/>
  <input id="user" value="postgres"/><br/><br/>

  <label>Password:</label><br/>
  <input id="password" type="password" value="postgres"/><br/><br/>

  <label>
    <input type="checkbox" id="remember" checked/>
    Remember password
  </label><br/><br/>

  <button onclick="save()">Save</button>

  <script nonce="{{nonce}}">

    const vscode = acquireVsCodeApi();

    async function save() {
      vscode.postMessage({
        command: "saveConnection",
        host: document.getElementById("host").value,
        port: document.getElementById("port").value,
        user: document.getElementById("user").value,
        password: document.getElementById("password").value,
        remember: document.getElementById("remember").checked
      });
    }

    // 给按钮绑定事件
    document.querySelector('button').addEventListener('click', save);

  </script>
</body>
</html>