<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="{{styleUri}}" rel="stylesheet" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'self' https://file%2B.vscode-resource.vscode-cdn.net; script-src 'self' 'nonce-{{nonce}}';">
</head>
<body>
  <h3 id="tableName"></h3>
  <table>
    <thead id="tableHeader"></thead>
    <tbody id="tableBody"></tbody>
  </table>

  <script nonce="{{nonce}}">
    const vscode = acquireVsCodeApi();

    window.addEventListener('message', event => {
      const message = event.data;
      const headers = message.headers || [];
      const rows = message.rows || [];

      document.getElementById('tableName').innerText = "Table: " + message.tableName;

      const headerHtml = headers.map(h => '<th>' + h + '</th>').join('');
      document.getElementById('tableHeader').innerHTML = '<tr>' + headerHtml + '</tr>';

      const bodyHtml = rows.map(row => {
        return '<tr>' + headers.map(h => '<td>' + row[h] + '</td>').join('') + '</tr>';
      }).join('');
      document.getElementById('tableBody').innerHTML = bodyHtml;
    });

    vscode.postMessage({ command: 'webviewReady' });
  </script>

</body>
</html>